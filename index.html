<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>èªè­˜å½¼æ­¤å°éŠæˆ²ï½œé»é¸æŠ½å•é¡Œ</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#121a33;
      --card:#0f1630;
      --text:#e8ecff;
      --muted:#a7b0d6;
      --accent:#7aa2ff;
      --accent2:#7ef0c3;
      --danger:#ff6b8b;
      --border:rgba(255,255,255,.10);
      --shadow: 0 16px 40px rgba(0,0,0,.35);
      --radius:18px;
      --font: ui-sans-serif, system-ui, -apple-system, "PingFang TC", "Noto Sans TC", "Microsoft JhengHei", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      background: radial-gradient(1200px 900px at 20% 10%, rgba(122,162,255,.18), transparent 60%),
                  radial-gradient(900px 700px at 85% 25%, rgba(126,240,195,.12), transparent 55%),
                  radial-gradient(1000px 800px at 40% 90%, rgba(255,107,139,.10), transparent 60%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }
    .app{
      width:min(920px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:24px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    header{
      padding:18px 18px 12px;
      background: rgba(0,0,0,.15);
      border-bottom:1px solid var(--border);
      display:flex;
      gap:14px;
      align-items:flex-end;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    h1{
      margin:0;
      font-size:18px;
      letter-spacing:.2px;
    }
    .sub{
      color:var(--muted);
      font-size:13px;
    }
    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    select, button, input{
      font-family:inherit;
    }
    select, input{
      background: rgba(255,255,255,.06);
      color:var(--text);
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px 12px;
      outline:none;
    }
    input::placeholder{color:rgba(232,236,255,.45)}
    button{
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      transition: transform .05s ease, background .15s ease, border-color .15s ease;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:600;
    }
    button:hover{ background: rgba(255,255,255,.10); border-color:rgba(255,255,255,.18); }
    button:active{ transform: translateY(1px) scale(.99); }
    .primary{
      background: linear-gradient(90deg, rgba(122,162,255,.35), rgba(122,162,255,.18));
      border-color: rgba(122,162,255,.45);
    }
    .primary:hover{ background: linear-gradient(90deg, rgba(122,162,255,.42), rgba(122,162,255,.22)); }
    .danger{
      background: rgba(255,107,139,.12);
      border-color: rgba(255,107,139,.35);
      color: #ffd9e1;
    }
    .danger:hover{ background: rgba(255,107,139,.18); }
    main{
      padding:18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
    }
    @media (max-width: 860px){
      main{ grid-template-columns:1fr; }
    }
    .card{
      background: rgba(0,0,0,.18);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: 0 10px 28px rgba(0,0,0,.22);
    }
    .bigcard{
      min-height: 330px;
      display:flex;
      flex-direction:column;
      gap:14px;
      position:relative;
      overflow:hidden;
    }
    .badgeRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .badge{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--muted);
      display:inline-flex;
      gap:8px;
      align-items:center;
      white-space:nowrap;
    }
    .dot{
      width:8px; height:8px; border-radius:999px;
      background: var(--accent);
      box-shadow: 0 0 0 3px rgba(122,162,255,.18);
    }
    .turn{
      display:flex; gap:8px; align-items:center;
    }
    .turn b{ color: var(--accent2); }
    .qwrap{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:12px 6px;
    }
    .question{
      text-align:center;
      font-size:26px;
      line-height:1.35;
      letter-spacing:.2px;
      margin:0;
      padding: 6px 8px;
      max-width: 24ch;
    }
    .hint{
      text-align:center;
      color: var(--muted);
      font-size:13px;
      margin-top:-4px;
    }
    .actions{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }
    .side{
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .listHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .listHead h2{
      margin:0;
      font-size:14px;
      color: var(--muted);
      letter-spacing:.3px;
      font-weight:700;
    }
    .pill{
      font-size:12px;
      color: var(--muted);
      border:1px solid var(--border);
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.04);
      white-space:nowrap;
    }
    .favList{
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height: 280px;
      overflow:auto;
      padding-right:4px;
    }
    .favItem{
      border:1px solid var(--border);
      border-radius:14px;
      padding:10px 12px;
      background: rgba(255,255,255,.04);
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:space-between;
    }
    .favItem p{
      margin:0;
      font-size:13px;
      color: var(--text);
      line-height:1.35;
    }
    .favItem small{
      display:block;
      margin-top:4px;
      color: var(--muted);
      font-size:11px;
    }
    .iconBtn{
      padding:8px 10px;
      border-radius:12px;
      font-weight:800;
      line-height:1;
    }
    .footerTips{
      margin-top:10px;
      color: var(--muted);
      font-size:12px;
      line-height:1.4;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      padding:2px 6px;
      border-radius:8px;
      font-size:11px;
      color: var(--text);
      display:inline-block;
      margin:0 2px;
    }
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background: rgba(18,26,51,.92);
      border:1px solid var(--border);
      padding:10px 12px;
      border-radius: 14px;
      color: var(--text);
      font-size:13px;
      box-shadow: var(--shadow);
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-4px);
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="èªè­˜å½¼æ­¤å°éŠæˆ²">
    <header>
      <div class="title">
        <h1>èªè­˜å½¼æ­¤å°éŠæˆ²ï½œé»ä¸€ä¸‹æŠ½å•é¡Œ</h1>
        <div class="sub">è¼•é¬†è¡¨å±¤å•é¡Œï¼šåƒä»€éº¼ã€çœ‹ä»€éº¼ã€å–œæ­¡ä»€éº¼ã€‚é©åˆå…©å€‹äººè¼ªæµå›ç­”ã€‚</div>
      </div>

      <div class="controls">
        <select id="category">
          <option value="all">å…¨éƒ¨åˆ†é¡</option>
        </select>

        <input id="search" type="text" placeholder="æœå°‹é—œéµå­—ï¼ˆä¾‹ï¼šé£²æ–™ã€é›»å½±ï¼‰" />

        <button id="shuffleBtn" title="æ´—ç‰Œé¡Œåº«">ğŸ”€ æ´—ç‰Œ</button>
        <button id="resetBtn" class="danger" title="æ¸…é™¤ç´€éŒ„ï¼ˆåŒ…å«æ”¶è—ï¼‰">ğŸ§¹ æ¸…é™¤</button>
      </div>
    </header>

    <main>
      <section class="card bigcard">
        <div class="badgeRow">
          <div class="badge"><span class="dot"></span><span id="catBadge">å…¨éƒ¨</span></div>
          <div class="badge turn">è¼ªåˆ°ï¼š<b id="turnName">A</b>ï¼ˆé»ã€Œä¸‹ä¸€é¡Œã€æœƒè‡ªå‹•æ›äººï¼‰</div>
          <div class="badge">é€²åº¦ï¼š<span id="progress">0</span></div>
        </div>

        <div class="qwrap">
          <div>
            <p class="question" id="question">é»ã€Œä¸‹ä¸€é¡Œã€é–‹å§‹æŠ½å•é¡Œ ğŸ²</p>
            <div class="hint" id="hint">å°æŠ€å·§ï¼šè¼ªæµå›ç­”ï¼‹é †ä¾¿è¿½å•ä¸€å¥ã€Œç‚ºä»€éº¼ï¼Ÿã€æœƒæ›´å¥½ç©ã€‚</div>
          </div>
        </div>

        <div class="actions">
          <button class="primary" id="nextBtn">ğŸ‘‰ ä¸‹ä¸€é¡Œ</button>
          <button id="favBtn">â­ æ”¶è—é€™é¡Œ</button>
          <button id="repeatBtn" title="ä¸æ›é¡Œï¼Œå†é¡¯ç¤ºä¸€æ¬¡ï¼ˆé©åˆé‡è¤‡å•ï¼‰">ğŸ” é‡å•</button>
        </div>

        <div class="footerTips">
          å¿«æ·éµï¼š<span class="kbd">Space</span> ä¸‹ä¸€é¡Œã€<span class="kbd">F</span> æ”¶è—ã€<span class="kbd">R</span> é‡å•
        </div>
      </section>

      <aside class="side">
        <section class="card">
          <div class="listHead">
            <h2>â­ æ”¶è—æ¸…å–®</h2>
            <span class="pill"><span id="favCount">0</span> é¡Œ</span>
          </div>
          <div class="favList" id="favList"></div>
          <div class="footerTips">
            æ”¶è—æ˜¯å­˜åœ¨ä½ é€™å°è£ç½®çš„ç€è¦½å™¨ï¼ˆlocalStorageï¼‰ã€‚ä½ å€‘è¦å…±ç”¨æ‰‹æ©Ÿç©æœ€æ–¹ä¾¿ã€‚
          </div>
        </section>

        <section class="card">
          <div class="listHead">
            <h2>ç©æ³•ï¼ˆè¶…ç°¡å–®ï¼‰</h2>
            <span class="pill">2 äººæ¨¡å¼</span>
          </div>
          <div class="footerTips">
            1) é»ã€Œä¸‹ä¸€é¡Œã€æŠ½å•é¡Œ<br/>
            2) A å…ˆå›ç­” â†’ B å›ç­”ï¼ˆæˆ–åéä¾†ï¼‰<br/>
            3) è¦ºå¾—æœ‰è¶£å°±æŒ‰ã€Œæ”¶è—ã€ç•™è‘—ä»¥å¾Œå†èŠ
          </div>
        </section>
      </aside>
    </main>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
(() => {
  // ===== é¡Œåº«ï¼šè¡¨å±¤æ—¥å¸¸å•é¡Œ =====
  const QUESTIONS = [
    // é£²é£Ÿ
    {c:"é£²é£Ÿ", q:"ä½ æœ€å–œæ­¡çš„æ—©é¤æ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ€å¸¸é»çš„é£²æ–™æ˜¯å“ªä¸€æ¯ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æ•¢åƒè¾£å—ï¼Ÿå¤§æ¦‚å¹¾åˆ†è¾£ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æ˜¯ç”œé£Ÿæ´¾é‚„æ˜¯é¹¹é£Ÿæ´¾ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ€æ„›çš„å®µå¤œæ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ€ä¸èƒ½æ¥å—çš„é£Ÿç‰©æ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ç«é‹ä½ æœ€æ„›å…ˆä¸‹ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"å¤œå¸‚ä½ ä¸€å®šæœƒè²·ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"å’–å•¡æ´¾é‚„æ˜¯èŒ¶æ´¾ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"é£²æ–™ç”œåº¦ä½ é€šå¸¸é»å¤šå°‘ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœƒç‚ºäº†ç¾é£Ÿæ’éšŠå—ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ€å–œæ­¡çš„ç”œé»æ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ å–œæ­¡åƒé£¯å¿«å¿«åƒé‚„æ˜¯æ…¢æ…¢åƒï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ€å¸¸åƒçš„ä¾¿ç•¶ï¼ä¸»é£Ÿæ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ å–œæ­¡åƒéºµé‚„æ˜¯é£¯ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ‰æ²’æœ‰ä¸€å€‹ã€Œå¿…åƒã€çš„å£è¢‹åå–®ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ€æ„›çš„æ°´æœæ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ å–œæ­¡æ¹¯æ¹¯æ°´æ°´é‚„æ˜¯ä¹¾çš„æ–™ç†ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœƒå˜—è©¦æ–°é¤å»³å—ï¼Ÿé‚„æ˜¯å›ºå®šå¹¾å®¶ï¼Ÿ"},
    {c:"é£²é£Ÿ", q:"ä½ æœ€å–œæ­¡çš„èª¿å‘³æ–™ï¼é†¬æ–™æ˜¯ä»€éº¼ï¼Ÿ"},

    // å¨›æ¨‚
    {c:"å¨›æ¨‚", q:"ä½ æœ€è¿‘åœ¨è¿½å“ªä¸€éƒ¨åŠ‡ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æ¯”è¼ƒå–œæ­¡é›»å½±é‚„æ˜¯å½±é›†ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœ€å¸¸è½çš„éŸ³æ¨‚é¡å‹æ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"æœ‰æ²’æœ‰ä¸€é¦–æ­Œä½ æ°¸é ä¸æœƒè½è†©ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å–œæ­¡çœ‹ YouTube å—ï¼Ÿæœ€å¸¸çœ‹ä»€éº¼ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœƒçœ‹å‹•æ¼«å—ï¼Ÿæœ€å–œæ­¡å“ªä¸€éƒ¨ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å¹³å¸¸æœƒç©éŠæˆ²å—ï¼Ÿæ‰‹æ©Ÿï¼é›»è…¦ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å–œæ­¡å–œåŠ‡é‚„æ˜¯æ¯”è¼ƒæ„Ÿäººçš„ç‰‡ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœ€å¸¸ç”¨çš„ç¤¾ç¾¤ app æ˜¯å“ªå€‹ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœƒè¿½æ˜Ÿå—ï¼Ÿæœ€è¿‘å–œæ­¡èª°ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœ‰æ²’æœ‰ã€Œä¸€ç›´é‡çœ‹ã€çš„ä½œå“ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å–œæ­¡çœ‹å±•è¦½ï¼æ¼”å”±æœƒå—ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å–œæ­¡çœ‹çŸ­å½±ç‰‡å—ï¼Ÿé‚„æ˜¯æœƒè¦ºå¾—å¤ªå¿«ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœ€å¸¸è½æ­Œç”¨å“ªå€‹å¹³å°ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å–œæ­¡çœ‹ææ€–ç‰‡å—ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœ€è¿‘æœ‰è¢«ä»€éº¼äº‹æƒ…é€—ç¬‘å—ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å–œæ­¡è½ Podcast å—ï¼Ÿé¡å‹ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æ¯”è¼ƒå–œæ­¡åœ¨å®¶çœ‹é‚„æ˜¯å»é›»å½±é™¢ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ æœ€å¸¸è¿½çš„å…§å®¹é¡å‹ï¼šç¾é£Ÿï¼æ—…éŠï¼é–‹ç®±ï¼çŸ¥è­˜ï¼æç¬‘ï¼Ÿ"},
    {c:"å¨›æ¨‚", q:"ä½ å–œæ­¡æ‹ç…§å—ï¼Ÿæ‹ä»€éº¼æœ€å¤šï¼Ÿ"},

    // ç”Ÿæ´»ç¿’æ…£
    {c:"ç¿’æ…£", q:"ä½ æ˜¯æ—©èµ·æ´¾é‚„æ˜¯å¤œè²“æ´¾ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"å‡ºé–€ä½ æœƒææ—©é‚„æ˜¯å£“ç·šï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æ‰‹æ©Ÿé›»é‡å‰©å¤šå°‘æœƒé–‹å§‹ç„¦æ…®ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ å‡ºé–€ä¸€å®šæœƒå¸¶çš„ä¸‰æ¨£æ±è¥¿æ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æ´—æ¾¡ç¿’æ…£æ—©ä¸Šé‚„æ˜¯æ™šä¸Šï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ ç¡è¦ºä¸€å®šè¦é—œç‡ˆå—ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ èµ·åºŠæœƒè³´åºŠå—ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æ˜¯æ¡Œé¢æ•´é½Šæ´¾é‚„æ˜¯éš¨æ€§æ´¾ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æ¯”è¼ƒæ€•ç†±é‚„æ˜¯æ€•å†·ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ å–œæ­¡é¦™é¦™çš„å‘³é“å—ï¼Ÿå–œæ­¡å“ªç¨®ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æœƒçœ‹å¤©æ°£é å ±å—ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ å¹³å¸¸èµ°è·¯å¿«é‚„æ˜¯æ…¢ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æ¯”è¼ƒå–œæ­¡æ™´å¤©é‚„æ˜¯é›¨å¤©ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æœƒç”¨å‚™å¿˜éŒ„å—ï¼Ÿè¨˜ä»€éº¼ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æ‰‹æ©Ÿæ¡Œå¸ƒæ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ å–œæ­¡åœ¨å®¶å¾…è‘—é‚„æ˜¯å¸¸å‡ºé–€ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ å–æ°´å¤šå—ï¼Ÿæœƒè¨˜å¾—è£œæ°´å—ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æœ‰å›ºå®šçš„æ”¾é¬†å„€å¼å—ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ æ¯”è¼ƒå–œæ­¡å†·æ°£å¾ˆå†·é‚„æ˜¯å‰›å¥½ï¼Ÿ"},
    {c:"ç¿’æ…£", q:"ä½ å–œæ­¡ç¡å‰æ»‘æ‰‹æ©Ÿå—ï¼Ÿ"},

    // ç©¿æ­ï¼†å°ç‰©
    {c:"ç©¿æ­", q:"ä½ å¹³å¸¸ç©¿æ­åä»€éº¼é¢¨æ ¼ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ æœ€å¸¸ç©¿çš„é¡è‰²æ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ å–œæ­¡çƒé‹é‚„æ˜¯é´å­ï¼çš®é‹ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ æœ‰æ²’æœ‰å¾ˆå¸¸æˆ´çš„é…ä»¶ï¼ˆæ‰‹éŒ¶ã€æˆ’æŒ‡ã€å¸½å­ï¼‰ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ å‡ºé–€æœƒèŠ±å¾ˆå¤šæ™‚é–“é¸è¡£æœå—ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ å–œæ­¡é¦™æ°´å—ï¼Ÿåå“ªä¸€ç¨®å‘³é“ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ æœƒåœ¨æ„é«®å‹å—ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ è¦ºå¾—å“ªå€‹å–®å“æœ€ç™¾æ­ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ æ¯”è¼ƒå–œæ­¡ç°¡å–®é¢¨é‚„æ˜¯äº®çœ¼é¢¨ï¼Ÿ"},
    {c:"ç©¿æ­", q:"ä½ æœ‰æ²’æœ‰ã€Œå¾ˆæ„›ç”¨ã€çš„å°ç‰©ï¼Ÿï¼ˆä¿æº«æ¯ã€è€³æ©Ÿç­‰ï¼‰"},

    // æ—…è¡Œï¼†å‡ºéŠï¼ˆè¡¨å±¤ï¼‰
    {c:"å‡ºéŠ", q:"ä½ å–œæ­¡ä¸€æ—¥éŠé‚„æ˜¯éå¤œï¼Ÿ"},
    {c:"å‡ºéŠ", q:"å‡ºéŠä½ æ¯”è¼ƒæ„›æ‹ç…§é‚„æ˜¯çœ‹é¢¨æ™¯ï¼Ÿ"},
    {c:"å‡ºéŠ", q:"ä½ æ—…éŠè¡Œç¨‹å–œæ­¡æ’å¾ˆæ»¿é‚„æ˜¯å¾ˆé¬†ï¼Ÿ"},
    {c:"å‡ºéŠ", q:"ä½ æ¯”è¼ƒå–œæ­¡æµ·é‚Šã€å±±ä¸Šã€é‚„æ˜¯åŸå¸‚ï¼Ÿ"},
    {c:"å‡ºéŠ", q:"ä½ å‡ºéŠæœ€æ€•é‡åˆ°ä»€éº¼ï¼Ÿï¼ˆå¡è»Šï¼ä¸‹é›¨ï¼äººå¤šï¼‰"},
    {c:"å‡ºéŠ", q:"ä½ æ˜¯æ–¹å‘æ„Ÿå¥½çš„äººå—ï¼Ÿ"},
    {c:"å‡ºéŠ", q:"æ­è»Šä½ æœƒç¡è¦ºå—ï¼Ÿ"},
    {c:"å‡ºéŠ", q:"ä½ å–œæ­¡é çª—ä½é‚„æ˜¯èµ°é“ä½ï¼Ÿ"},
    {c:"å‡ºéŠ", q:"ä½ æœƒè²·ç´€å¿µå“å—ï¼Ÿé€šå¸¸è²·ä»€éº¼ï¼Ÿ"},
    {c:"å‡ºéŠ", q:"ä½ æœ€æƒ³å»çš„ä¸€å€‹åœ°æ–¹æ˜¯å“ªè£¡ï¼Ÿ"},

    // éš¨å£èŠ
    {c:"éš¨å£èŠ", q:"ä½ æœ€è¿‘æœ‰æ²’æœ‰åƒåˆ°ä»€éº¼å¥½åƒçš„ï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ ä»Šå¤©å¿ƒæƒ…å¤§æ¦‚å¹¾åˆ†ï¼ˆ1â€“10ï¼‰ï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ æœ€è¿‘åœ¨æœŸå¾…ä»€éº¼äº‹æƒ…ï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ ç¾åœ¨æœ€æƒ³åšçš„ä¸€ä»¶å°äº‹æ˜¯ä»€éº¼ï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ æ¯”è¼ƒå–œæ­¡ç™½å¤©é‚„æ˜¯å¤œæ™šï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ æœ‰æ²’æœ‰ä¸€å€‹å¸¸å»çš„åœ°æ–¹ï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ æœƒå› ç‚ºå¤©æ°£å½±éŸ¿å¿ƒæƒ…å—ï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ æœ€è¿‘æœ‰æ²’æœ‰æƒ³è²·çš„æ±è¥¿ï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"ä½ å–œæ­¡ç†±é¬§é‚„æ˜¯å®‰éœï¼Ÿ"},
    {c:"éš¨å£èŠ", q:"å¦‚æœç¾åœ¨æ”¾å‡ï¼Œä½ æœ€æƒ³å¹¹å˜›ï¼Ÿ"},
  ];

  // ===== ç‹€æ…‹ =====
  const LS_KEY = "get-to-know-game-v1";
  const state = loadState() ?? {
    turn: "A",
    seen: [],     // indices
    favs: [],     // {c,q}
    lastIndex: null,
    category: "all",
    search: ""
  };

  // ===== DOM =====
  const elCategory = document.getElementById("category");
  const elSearch   = document.getElementById("search");
  const elNext     = document.getElementById("nextBtn");
  const elRepeat   = document.getElementById("repeatBtn");
  const elFav      = document.getElementById("favBtn");
  const elShuffle  = document.getElementById("shuffleBtn");
  const elReset    = document.getElementById("resetBtn");
  const elQ        = document.getElementById("question");
  const elCatBadge = document.getElementById("catBadge");
  const elTurnName = document.getElementById("turnName");
  const elProgress = document.getElementById("progress");
  const elFavList  = document.getElementById("favList");
  const elFavCount = document.getElementById("favCount");
  const elToast    = document.getElementById("toast");

  // ===== åˆå§‹åŒ– UI =====
  const categories = Array.from(new Set(QUESTIONS.map(x => x.c)));
  categories.forEach(c => {
    const opt = document.createElement("option");
    opt.value = c;
    opt.textContent = c;
    elCategory.appendChild(opt);
  });

  elCategory.value = state.category;
  elSearch.value = state.search;

  renderMeta();
  renderFavs();

  // è‹¥ä¹‹å‰æœ‰æŠ½éï¼Œé‡é¡¯ç¤ºæœ€å¾Œä¸€é¡Œ
  if (state.lastIndex !== null && QUESTIONS[state.lastIndex]) {
    const item = QUESTIONS[state.lastIndex];
    elQ.textContent = item.q;
    elCatBadge.textContent = state.category === "all" ? "å…¨éƒ¨" : state.category;
  }

  // ===== äº‹ä»¶ =====
  elCategory.addEventListener("change", () => {
    state.category = elCategory.value;
    state.seen = [];
    state.lastIndex = null;
    saveState();
    renderMeta();
    toast("å·²åˆ‡æ›åˆ†é¡ä¸¦é‡ç½®é€²åº¦");
  });

  elSearch.addEventListener("input", () => {
    state.search = elSearch.value.trim();
    state.seen = [];
    state.lastIndex = null;
    saveState();
    renderMeta();
  });

  elNext.addEventListener("click", () => nextQuestion());
  elRepeat.addEventListener("click", () => repeatQuestion());
  elFav.addEventListener("click", () => addFavorite());
  elShuffle.addEventListener("click", () => {
    state.seen = [];
    state.lastIndex = null;
    saveState();
    toast("å·²æ´—ç‰Œï¼ˆé‡ç½®æŠ½é¡Œé †åºï¼‰");
    nextQuestion();
  });
  elReset.addEventListener("click", () => {
    if (!confirm("ç¢ºå®šè¦æ¸…é™¤é€²åº¦èˆ‡æ”¶è—å—ï¼Ÿ")) return;
    localStorage.removeItem(LS_KEY);
    location.reload();
  });

  document.addEventListener("keydown", (e) => {
    if (e.target && (e.target.tagName === "INPUT" || e.target.tagName === "SELECT")) return;
    if (e.code === "Space") { e.preventDefault(); nextQuestion(); }
    if (e.key.toLowerCase() === "f") addFavorite();
    if (e.key.toLowerCase() === "r") repeatQuestion();
  });

  // ===== æ ¸å¿ƒåŠŸèƒ½ =====
  function getPool(){
    const cat = state.category;
    const s = (state.search || "").toLowerCase();

    return QUESTIONS
      .map((item, idx) => ({...item, idx}))
      .filter(item => cat === "all" ? true : item.c === cat)
      .filter(item => s ? item.q.toLowerCase().includes(s) || item.c.toLowerCase().includes(s) : true);
  }

  function nextQuestion(){
    const pool = getPool();
    if (pool.length === 0){
      elQ.textContent = "æ‰¾ä¸åˆ°ç¬¦åˆçš„é¡Œç›® ğŸ˜… ä½ å¯ä»¥æ¸…ç©ºæœå°‹æˆ–åˆ‡å›ã€Œå…¨éƒ¨åˆ†é¡ã€ã€‚";
      toast("é¡Œç›®æ± æ˜¯ç©ºçš„");
      return;
    }

    // å–æœªçœ‹éçš„
    const unseen = pool.filter(x => !state.seen.includes(x.idx));

    if (unseen.length === 0){
      // å…¨éƒ¨çœ‹é â†’ é‡æ–°å¾ªç’°
      state.seen = [];
      toast("é€™å€‹åˆ†é¡é¡Œç›®æŠ½å®Œäº†ï¼å·²è‡ªå‹•é‡æ–°é–‹å§‹");
    }

    const refreshedPool = getPool().filter(x => !state.seen.includes(x.idx));
    const pick = refreshedPool[Math.floor(Math.random() * refreshedPool.length)];

    state.lastIndex = pick.idx;
    state.seen.push(pick.idx);

    // åˆ‡æ›è¼ªåˆ°çš„äºº
    state.turn = (state.turn === "A") ? "B" : "A";

    saveState();
    elQ.textContent = pick.q;
    renderMeta();
  }

  function repeatQuestion(){
    if (state.lastIndex === null){
      toast("é‚„æ²’æŠ½é¡Œå–”ï½å…ˆæŒ‰ã€Œä¸‹ä¸€é¡Œã€");
      return;
    }
    const item = QUESTIONS[state.lastIndex];
    if (!item) return;
    elQ.textContent = item.q;
    toast("é‡å•åŒä¸€é¡Œ");
  }

  function addFavorite(){
    if (state.lastIndex === null){
      toast("å…ˆæŠ½ä¸€é¡Œå†æ”¶è—ï½");
      return;
    }
    const item = QUESTIONS[state.lastIndex];
    const exists = state.favs.some(x => x.q === item.q && x.c === item.c);
    if (exists){
      toast("é€™é¡Œå·²ç¶“åœ¨æ”¶è—è£¡äº† â­");
      return;
    }
    state.favs.unshift({c:item.c, q:item.q, at: Date.now()});
    saveState();
    renderFavs();
    toast("å·²æ”¶è— â­");
  }

  function removeFavorite(at){
    state.favs = state.favs.filter(x => x.at !== at);
    saveState();
    renderFavs();
    toast("å·²ç§»é™¤æ”¶è—");
  }

  // ===== UI render =====
  function renderMeta(){
    const pool = getPool();
    elTurnName.textContent = state.turn;
    elCatBadge.textContent = state.category === "all" ? "å…¨éƒ¨" : state.category;
    elProgress.textContent = `${Math.min(state.seen.length, pool.length)}/${pool.length}`;
  }

  function renderFavs(){
    elFavList.innerHTML = "";
    elFavCount.textContent = state.favs.length;

    if (state.favs.length === 0){
      const empty = document.createElement("div");
      empty.className = "footerTips";
      empty.textContent = "é‚„æ²’æœ‰æ”¶è—ï½é‡åˆ°å¾ˆæœ‰è¶£çš„é¡Œç›®å°±æŒ‰ â­ æ”¶è—ï¼";
      elFavList.appendChild(empty);
      return;
    }

    state.favs.forEach(item => {
      const row = document.createElement("div");
      row.className = "favItem";

      const left = document.createElement("div");
      const p = document.createElement("p");
      p.textContent = item.q;
      const small = document.createElement("small");
      small.textContent = `åˆ†é¡ï¼š${item.c}`;
      left.appendChild(p);
      left.appendChild(small);

      const btn = document.createElement("button");
      btn.className = "iconBtn danger";
      btn.textContent = "âœ•";
      btn.title = "ç§»é™¤æ”¶è—";
      btn.addEventListener("click", () => removeFavorite(item.at));

      row.appendChild(left);
      row.appendChild(btn);
      elFavList.appendChild(row);
    });
  }

  function toast(msg){
    elToast.textContent = msg;
    elToast.classList.add("show");
    clearTimeout(toast._t);
    toast._t = setTimeout(() => elToast.classList.remove("show"), 1400);
  }

  function saveState(){
    localStorage.setItem(LS_KEY, JSON.stringify(state));
  }
  function loadState(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      return raw ? JSON.parse(raw) : null;
    }catch(e){ return null; }
  }
})();
</script>
</body>
</html>
